<div class="auth-page">
  <div class="auth-card">
    <div class="auth-header">
      <h1>DraftGap</h1>
      <p>Accede con tu cuenta y tu Riot ID.</p>
    </div>

    <div class="auth-tabs">
      <button
        type="button"
        [class.active]="mode() === 'login'"
        (click)="setMode('login')"
      >
        Iniciar sesión
      </button>
      <button
        type="button"
        [class.active]="mode() === 'register'"
        (click)="setMode('register')"
      >
        Registrarse
      </button>
    </div>

    <div class="auth-messages" *ngIf="errorMessage() || successMessage()">
      <p class="error" *ngIf="errorMessage()">{{ errorMessage() }}</p>
      <p class="success" *ngIf="successMessage()">{{ successMessage() }}</p>
    </div>

    <form class="auth-form" *ngIf="mode() === 'login'" [formGroup]="loginForm" (ngSubmit)="submitLogin()">
      <label>
        Email
        <input type="email" formControlName="email" placeholder="tu@email.com" />
        <span class="field-error" *ngIf="loginForm.controls.email.touched && loginForm.controls.email.invalid">
          Email inválido.
        </span>
      </label>

      <label>
        Contraseña
        <input type="password" formControlName="password" placeholder="••••••" />
        <span class="field-error" *ngIf="loginForm.controls.password.touched && loginForm.controls.password.invalid">
          Mínimo 6 caracteres.
        </span>
      </label>

      <button class="primary" type="submit" [disabled]="isSubmitting()">
        {{ isSubmitting() ? 'Entrando...' : 'Entrar' }}
      </button>
    </form>

    <form
      class="auth-form"
      *ngIf="mode() === 'register'"
      [formGroup]="registerForm"
      (ngSubmit)="submitRegister()"
    >
      <label>
        Email
        <input type="email" formControlName="email" placeholder="tu@email.com" />
        <span class="field-error" *ngIf="registerForm.controls.email.touched && registerForm.controls.email.invalid">
          Email inválido.
        </span>
      </label>

      <label>
        Contraseña
        <input type="password" formControlName="password" placeholder="Mínimo 6 caracteres" />
        <span class="field-error" *ngIf="registerForm.controls.password.touched && registerForm.controls.password.invalid">
          Mínimo 6 caracteres.
        </span>
      </label>

      <label>
        Riot ID
        <input type="text" formControlName="riotId" placeholder="GameName#TAG" />
        <span class="field-error" *ngIf="registerForm.controls.riotId.touched && registerForm.controls.riotId.invalid">
          Formato requerido: GameName#TAG.
        </span>
      </label>

      <label>
        Región
        <select formControlName="region">
          <option *ngFor="let region of regions" [value]="region.value">{{ region.label }}</option>
        </select>
      </label>

      <button class="primary" type="submit" [disabled]="isSubmitting()">
        {{ isSubmitting() ? 'Creando...' : 'Crear cuenta' }}
      </button>
    </form>

    <div class="auth-footer">
      <span>Usa el Swagger del backend si quieres probar los endpoints directamente.</span>
    </div>
  </div>
</div>
