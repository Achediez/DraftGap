<!-- Modal de perfil de usuario -->
<div class="user-modal-backdrop" *ngIf="selectedUser" (click)="selectedUser = null"></div>
<div class="user-modal" *ngIf="selectedUser">
  <div class="user-modal-content">
    <button class="close-modal-btn" (click)="selectedUser = null">&times;</button>
    <h3>Perfil de usuario</h3>
    <div class="user-modal-details">
      <div><strong>Email:</strong> {{ selectedUser.email }}</div>
      <div><strong>Riot ID:</strong> {{ selectedUser.riotId }}</div>
      <div><strong>Regi√≥n:</strong> {{ selectedUser.region }}</div>
      <div><strong>Admin:</strong> {{ selectedUser.isAdmin ? 'S√≠' : 'No' }}</div>
      <div><strong>Creado:</strong> {{ selectedUser.createdAt ? (selectedUser.createdAt | date:'short') : '-' }}</div>
      <div><strong>√öltima sync:</strong> {{ selectedUser.lastSync ? (selectedUser.lastSync | date:'short') : '-' }}</div>
    </div>
  </div>
</div>
<div class="admin-container">
  <div class="admin-header">
    <h2>Panel de Administraci√≥n</h2>
    <button class="back-dashboard-btn" (click)="goToDashboard()">Volver al Dashboard</button>
  </div>
  <div class="user-actions">
    <form class="add-user-form" (ngSubmit)="addUser()" #userForm="ngForm">
      <input type="email" name="email" [(ngModel)]="newUser.email" placeholder="Email" required />
      <input type="text" name="riotId" [(ngModel)]="newUser.riotId" placeholder="Riot ID" required />
      <input type="text" name="region" [(ngModel)]="newUser.region" placeholder="Regi√≥n" required />
      <input type="password" name="password" [(ngModel)]="newUser.password" placeholder="Contrase√±a" required />
      <label>
        <input type="checkbox" name="isAdmin" [(ngModel)]="newUser.isAdmin" /> Admin
      </label>
      <button type="submit" [disabled]="userForm.invalid || loading">A√±adir usuario</button>
    </form>
    <div *ngIf="addUserError" class="error-msg">{{ addUserError }}</div>
    <div *ngIf="addUserSuccess" class="success-msg">Usuario a√±adido correctamente</div>
  </div>
  <div class="user-list">
    <table class="users-table">
      <thead>
        <tr>
          <th>Email</th>
          <th>Riot ID</th>
          <th>Regi√≥n</th>
          <th>Admin</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let user of users">
          <tr>
            <td>{{ user.email }}</td>
            <td>{{ user.riotId }}</td>
            <td>{{ user.region }}</td>
            <td>{{ user.isAdmin ? 'S√≠' : 'No' }}</td>
            <td>
              <!-- Botones de acci√≥n: ver y eliminar -->
              <button class="action-btn view-btn" (click)="viewUser(user)"><span aria-label="Ver perfil">üîç</span></button>
              <button class="action-btn delete-btn" [disabled]="user.email === 'prueba2@draftgap.local'" (click)="deleteUser(user)"><span aria-label="Eliminar">üóëÔ∏è</span></button>
            </td>
          </tr>
        </ng-container>
      </tbody>
    </table>
  </div>
</div>
