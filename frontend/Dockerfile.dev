FROM node:24.13.1-alpine

RUN apk add --no-cache python3 make g++

WORKDIR /app

RUN npm install -g @angular/cli@21.1.3 npm@11.8.0

# Disable Angular CLI analytics globally at image build time so the CLI never
# attempts to prompt for consent in a non-interactive Docker environment.
RUN ng analytics disable --global

COPY package*.json ./

RUN npm install

EXPOSE 4200 49153

CMD ["sh", "-c", "[ ! -d node_modules ] && npm install; ng serve --host 0.0.0.0 --poll 2000"]
